webpackJsonp([1],{"8uNX":function(t,e){},IFnO:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},a,!1,function(t){n("IFnO")},null,null).exports,s=n("/ocq"),l={name:"Nav",data:function(){return{activeIndex:this.$route.path,activeIndex2:this.$route.path,account:{}}},methods:{handleSelect:function(t,e){console.log(t,e),this.$router.push(t)},toAdmin:function(){console.log(this.account),this.account.admin?this.$router.push({path:"/admin"}):this.$message({message:"Admin access only.",type:"warning"})},logout:function(){var t=this;this.$http.get("http://localhost:4025/user/logout").then(function(e){t.$router.push({path:"/"}),t.$http.get("http://localhost:4025/cart/deleteAll").then(function(t){})}).catch(function(t){console.error(t)})},asset:function(){this.$message({message:"Asset management is under development...",type:"message"})}},created:function(){var t=this;this.$http.get("http://localhost:4025/user/loginUser").then(function(e){console.log(e.data),t.account=e.data,null==t.account&&(console.log("not log in yet"),t.$router.push({path:"/"}))}).catch(function(t){console.error(t)})}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"nav"}},[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex2,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"/repo_in"}},[t._v("Amazon.jlu "),n("u",[t._v("Mock")])]),t._v(" "),n("el-menu-item",{attrs:{index:"/admin",disabled:!t.account.admin}},[t._v("\n      Admin")]),t._v(" "),n("el-menu-item",{attrs:{index:"/cart"}},[t._v("\n      Cart")]),t._v(" "),n("el-menu-item",{staticClass:"ir",on:{click:t.logout}},[t._v("\n    "+t._s(t.account.username)+" Logout")]),t._v(" "),n("el-menu-item",{staticClass:"ir",on:{click:t.asset}},[t._v("ï¿¥ \n    "+t._s(t.account.asset.toFixed(2)))])],1)],1)},staticRenderFns:[]};var c=n("VU/8")(l,i,!1,function(t){n("UVr8")},null,null).exports,u={name:"Admin",data:function(){return{ruleForm:{isbn:"",name:"",author:"",pubDate:""}}},methods:{onSubmit:function(){var t=this;/\S/.test(this.ruleForm.isbn)&&/\S/.test(this.ruleForm.name)&&/\S/.test(this.ruleForm.author)?this.$http.post("http://localhost:4025/book/save",this.ruleForm).then(function(e){e.data.status?t.$notify({title:"Success",message:e.data.msg,type:"success"}):t.$notify.info({title:"Info",message:e.data.msg})}).catch(function(e){t.$notify.error({title:"Error",message:res.data.msg})}):this.$notify({title:"Warning",message:"Invalid info",type:"warning"})},onReset:function(){this.ruleForm={}}},components:{Nav:c}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav"),t._v(" "),n("el-form",{ref:"ruleForm",staticStyle:{width:"40%",margin:"100px auto"},attrs:{model:t.ruleForm,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"ISBN"}},[n("el-input",{model:{value:t.ruleForm.isbn,callback:function(e){t.$set(t.ruleForm,"isbn",e)},expression:"ruleForm.isbn"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Bookname"}},[n("el-input",{attrs:{type:"password"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Author"}},[n("el-input",{attrs:{type:"password"},model:{value:t.ruleForm.author,callback:function(e){t.$set(t.ruleForm,"author",e)},expression:"ruleForm.author"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Publish Date"}},[n("el-col",{attrs:{span:11}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Pick a date"},model:{value:t.ruleForm.pubDate,callback:function(e){t.$set(t.ruleForm,"pubDate",e)},expression:"ruleForm.pubDate"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"Stock"}},[n("el-input-number",{attrs:{"controls-position":"right",min:1,max:999},model:{value:t.ruleForm.stock,callback:function(e){t.$set(t.ruleForm,"stock",e)},expression:"ruleForm.stock"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Set Price"}},[n("el-input-number",{attrs:{"controls-position":"right",min:1,max:999},model:{value:t.ruleForm.cost,callback:function(e){t.$set(t.ruleForm,"cost",e)},expression:"ruleForm.cost"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("Order")]),t._v(" "),n("el-button",{on:{click:t.onReset}},[t._v("Reset")])],1)],1)],1)},staticRenderFns:[]};var p=n("VU/8")(u,m,!1,function(t){n("Sqtb")},null,null).exports,h={name:"Out",data:function(){return{activeIndex:this.$route.path,activeIndex2:this.$route.path}},methods:{handleSelect:function(t,e){console.log(t,e),this.$router.push(t)}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"nav"}},[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex2,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"/repo"}},[t._v("Amazon.jlu "),n("u",[t._v("Mock")])]),t._v(" "),n("el-menu-item",{attrs:{index:"/admin",disabled:""}},[t._v("\n      Admin")]),t._v(" "),n("el-menu-item",{attrs:{index:"/cart",disabled:""}},[t._v("\n      Cart")]),t._v(" "),n("el-menu-item",{staticClass:"ir",attrs:{index:"/login"}},[t._v("\n      Login")]),t._v(" "),n("el-menu-item",{staticClass:"ir",attrs:{index:"/signup"}},[t._v("\n      Signup")])],1)],1)},staticRenderFns:[]};var f=n("VU/8")(h,d,!1,function(t){n("8uNX")},null,null).exports,v={data:function(){return{num:1,max:999}},methods:{handleChange:function(t){console.log(t)}}},b={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-input-number",{staticStyle:{width:"100px"},attrs:{placeholder:"0","controls-position":"right",min:0,max:999},on:{change:t.handleChange},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})},staticRenderFns:[]},g=n("VU/8")(v,b,!1,null,null,null).exports,_={name:"Repo",data:function(){return{tableData:[],search:""}},methods:{pop:function(){this.$message("Please login first.")}},created:function(){var t=this;this.$http.get("http://localhost:4025/book/findall").then(function(e){console.log(e),t.tableData=e.data}).catch(function(t){console.error(t)})},components:{Nav:f,InN:g}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav"),t._v(" "),n("el-table",{staticStyle:{width:"80%",margin:"30px auto"},attrs:{data:t.tableData.filter(function(e){return!t.search||e.name.toLowerCase().includes(t.search.toLowerCase())||e.isbn.includes(t.search)||e.author.toLowerCase().includes(t.search.toLowerCase())})}},[n("el-table-column",{attrs:{label:"ISBN",prop:"isbn"}}),t._v(" "),n("el-table-column",{attrs:{label:"Bookname",prop:"name"}}),t._v(" "),n("el-table-column",{attrs:{label:"Author",prop:"author"}}),t._v(" "),n("el-table-column",{attrs:{label:"PubDate",prop:"pubDate"}}),t._v(" "),n("el-table-column",{attrs:{label:"Stock",prop:"stock"}}),t._v(" "),n("el-table-column",{attrs:{label:"Cost",prop:"cost"}}),t._v(" "),n("el-table-column",{attrs:{align:"right",width:"250"},scopedSlots:t._u([{key:"header",fn:function(e){return[n("el-input",{attrs:{size:"medium",placeholder:"Type to search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[n("InN",{staticStyle:{"margin-right":"10px"}}),t._v(" "),n("el-button",{attrs:{type:"plain",size:"medium"},on:{click:t.pop}},[t._v("Purchase")])]}}])})],1)],1)},staticRenderFns:[]};var $=n("VU/8")(_,y,!1,function(t){n("jaDH")},null,null).exports,F=n("mvHQ"),k=n.n(F),x={name:"Repo_in",data:function(){return{tableData:[],search:"",account:{},num:[]}},methods:{handlePurchase:function(t,e){if(console.log(t,e),this.num[t]>0){var n=JSON.parse(k()(e));n.stock=this.num[t],this.$http.post("http://localhost:4025/cart/save",n).then(function(t){console.log(t.data)}).catch(function(t){console.error(t)}),this.$message({message:this.num[t]+" X <"+e.name+"> added.",type:"success"})}else this.$message.error("Please input number.")}},created:function(){var t=this;this.$http.get("http://localhost:4025/book/findall").then(function(e){console.log(e),t.tableData=e.data}).catch(function(t){console.error(t)}),this.$http.get("http://localhost:4025/user/loginUser").then(function(e){console.log(e.data),t.account=e.data,null==t.account&&(console.log("no account back"),t.$router.push({path:"/"}))}).catch(function(t){console.error(t)})},components:{Nav:c,InN:g}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav"),t._v(" "),n("el-table",{staticStyle:{width:"80%",margin:"30px auto"},attrs:{data:t.tableData.filter(function(e){return!t.search||e.name.toLowerCase().includes(t.search.toLowerCase())||e.isbn.includes(t.search)||e.author.toLowerCase().includes(t.search.toLowerCase())})}},[n("el-table-column",{attrs:{label:"ISBN",prop:"isbn"}}),t._v(" "),n("el-table-column",{attrs:{label:"Bookname",prop:"name"}}),t._v(" "),n("el-table-column",{attrs:{label:"Author",prop:"author"}}),t._v(" "),n("el-table-column",{attrs:{label:"PubDate",prop:"pubDate"}}),t._v(" "),n("el-table-column",{attrs:{label:"Stock",prop:"stock"}}),t._v(" "),n("el-table-column",{attrs:{label:"Cost",prop:"cost"}}),t._v(" "),n("el-table-column",{attrs:{align:"right",width:"250"},scopedSlots:t._u([{key:"header",fn:function(e){return[n("el-input",{attrs:{size:"medium",placeholder:"Type to search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[[n("el-input-number",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{placeholder:"0","controls-position":"right",min:0,max:999},model:{value:t.num[e.$index],callback:function(n){t.$set(t.num,e.$index,n)},expression:"num[scope.$index]"}})],t._v(" "),n("el-button",{attrs:{type:"plain",size:"medium"},on:{click:function(n){return t.handlePurchase(e.$index,e.row)}}},[t._v("Add to Cart")])]}}])})],1)],1)},staticRenderFns:[]};var S=n("VU/8")(x,w,!1,function(t){n("UvvM")},null,null).exports,N={name:"Cart",data:function(){return{tableData:[],search:"",account:{},sum:0,key:0}},methods:{handleUpdateClick:function(){this.key+=1},handleDelete:function(t,e){var n=this;this.$http.post("http://localhost:4025/cart/delete",e).then(function(t){n.login()}).catch(function(t){console.error(t)})},getSummaries:function(t){var e=this,n=t.columns,o=t.data,a=[];return n.forEach(function(t,e){if(0!==e)if(5==e){var n=o.map(function(e){return Number(e[t.property])});n.every(function(t){return isNaN(t)})?a[e]="":a[e]="$ "+n.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:t+e},0)}else a[e]="";else a[e]="Total Cost"}),n.forEach(function(t,n){if(5==n){var a=o.map(function(e){return Number(e[t.property])});a.every(function(t){return isNaN(t)})||(e.sum=a.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:t+e},0))}}),a},open:function(){var t=this;this.$http.get("http://localhost:4025/book/updateAll").then(function(e){var n=e.data,o=n.status;n.msg;o?t.$http.get("http://localhost:4025/user/order?sum="+t.sum).then(function(e){t.$message({message:e.data.msg,type:"success"}),t.$http.get("http://localhost:4025/cart/deleteAll").then(function(e){t.login(),t.handleUpdateClick()}).catch(function(t){console.log(t)})}).catch(function(t){console.error(t)}):t.$message({message:e.data.msg,type:"info"})}).catch(function(t){console.error(t)})},login:function(){var t=this;this.$http.get("http://localhost:4025/cart/findall").then(function(e){t.tableData=e.data}).catch(function(t){console.error(t)}),this.$http.get("http://localhost:4025/user/loginUser").then(function(e){console.log(e.data),t.account=e.data,null==t.account&&(console.log("no account back"),t.$router.push({path:"/"}))}).catch(function(t){console.error(t)})}},created:function(){this.login()},components:{Nav:c,InN:g}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav",{key:t.key}),t._v(" "),n("el-table",{staticStyle:{width:"80%",margin:"30px auto"},attrs:{data:t.tableData,border:"","summary-method":t.getSummaries,"show-summary":""}},[n("el-table-column",{attrs:{label:"ISBN",prop:"isbn"}}),t._v(" "),n("el-table-column",{attrs:{label:"Bookname",prop:"name"}}),t._v(" "),n("el-table-column",{attrs:{label:"Author",prop:"author"}}),t._v(" "),n("el-table-column",{attrs:{label:"PubDate",prop:"pubDate"}}),t._v(" "),n("el-table-column",{attrs:{label:"Purchase",prop:"stock"}}),t._v(" "),n("el-table-column",{attrs:{label:"Cost",prop:"cost"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",width:"200",label:"Operation"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"medium",type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("Delete")])]}}])})],1),t._v(" "),n("div",{attrs:{align:"center"}},[n("el-button",{attrs:{id:"order",type:"primary",plain:""},on:{click:t.open}},[t._v("Order")])],1)],1)},staticRenderFns:[]};var A=n("VU/8")(N,C,!1,function(t){n("PjYc")},null,null).exports,D={name:"Signup",data:function(){return{ruleForm:{username:"",password:"",confirm:"",type:[]}}},methods:{onSubmit:function(){var t=this,e=this.ruleForm,n=e.username,o=e.password,a=e.confirm;console.log(this.ruleForm),/^[a-zA-Z0-9]{4,20}$/.test(n)?/^[a-zA-Z0-9]{4,20}$/.test(o)?o!=a?this.$notify({title:"Warning",message:"Unmatched confirmation",type:"warning"}):(this.ruleForm.admin=0!=this.ruleForm.type.length,this.$http.post("http://localhost:4025/user/save",this.ruleForm).then(function(e){e.data.status?t.$notify({title:"Success",message:e.data.msg,type:"success"}):t.$notify.info({title:"Info",message:e.data.msg})}).catch(function(e){t.$notify.error({title:"Error",message:res.data.msg})})):this.$notify({title:"Warning",message:"Invalid password",type:"warning"}):this.$notify({title:"Warning",message:"Invalid username",type:"warning"})},onReset:function(){this.ruleForm={username:"",password:"",confirm:"",type:[]}}},components:{Nav:f}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav"),t._v(" "),n("el-form",{ref:"ruleForm",staticStyle:{width:"40%",margin:"100px auto"},attrs:{model:t.ruleForm,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"Username"}},[n("el-input",{attrs:{placeholder:"4-20 letters or numbers"},model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Password"}},[n("el-input",{attrs:{type:"password",placeholder:"4-20 letters or numbers"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Confirm"}},[n("el-input",{attrs:{type:"password",placeholder:"re-input your password"},model:{value:t.ruleForm.confirm,callback:function(e){t.$set(t.ruleForm,"confirm",e)},expression:"ruleForm.confirm"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"User type"}},[n("el-checkbox-group",{model:{value:t.ruleForm.type,callback:function(e){t.$set(t.ruleForm,"type",e)},expression:"ruleForm.type"}},[n("el-checkbox",{attrs:{label:"Admin",name:"type"}})],1)],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("Create")]),t._v(" "),n("el-button",{on:{click:t.onReset}},[t._v("Reset")])],1)],1)],1)},staticRenderFns:[]};var I=n("VU/8")(D,U,!1,function(t){n("vR+A")},null,null).exports,R={name:"Login",data:function(){return{ruleForm:{username:"",password:""}}},methods:{onSubmit:function(){var t=this,e=this.ruleForm,n=e.username,o=e.password;console.log(this.ruleForm),/^[a-zA-Z0-9]{4,20}$/.test(n)?/^[a-zA-Z0-9]{4,20}$/.test(o)?this.$http.post("http://localhost:4025/user/login",this.ruleForm).then(function(e){e.data.status?(t.$notify({title:"Success",message:e.data.msg,type:"success"}),t.$router.push({path:"/repo_in"})):t.$notify.error({title:"Error",message:e.data.msg})}).catch(function(e){t.$notify.error({title:"Error",message:res.data.msg})}):this.$notify({title:"Warning",message:"Invalid password",type:"warning"}):this.$notify({title:"Warning",message:"Invalid username",type:"warning"})},onReset:function(){this.ruleForm={username:"",password:""}}},components:{Nav:f}},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav"),t._v(" "),n("el-form",{ref:"ruleForm",staticStyle:{width:"40%",margin:"100px auto"},attrs:{model:t.ruleForm,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"Username"}},[n("el-input",{attrs:{placeholder:"4-20 letters or numbers"},model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Password"}},[n("el-input",{attrs:{type:"password",placeholder:"4-20 letters or numbers"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("Login")]),t._v(" "),n("el-button",{on:{click:t.onReset}},[t._v("Reset")])],1)],1)],1)},staticRenderFns:[]};var E=n("VU/8")(R,P,!1,function(t){n("jynk")},null,null).exports,z=s.a.prototype.push;s.a.prototype.push=function(t){return z.call(this,t).catch(function(t){return t})},o.default.use(s.a);var L=new s.a({routes:[{path:"/",redirect:"/repo"},{path:"/repo",component:$},{path:"/repo_in",component:S},{path:"/admin",component:p},{path:"/cart",component:A},{path:"/signup",component:I},{path:"/login",component:E},{path:"/c",redirect:"/cart"}]}),V=n("C6wW"),j=n.n(V),B=n("gU9C"),O=n.n(B);n("b6Kr");o.default.prototype.$http=j.a,o.default.config.productionTip=!1,o.default.use(O.a),new o.default({el:"#app",router:L,components:{App:r},template:"<App/>"})},PjYc:function(t,e){},Sqtb:function(t,e){},UVr8:function(t,e){},UvvM:function(t,e){},b6Kr:function(t,e){},jaDH:function(t,e){},jynk:function(t,e){},"vR+A":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.61c7623c08b1f34fd377.js.map